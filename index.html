<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zalo: 0971.282.336</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; padding: 20px; }
        h1, h2, h3 { color: #333; }
        code { background: #f4f4f4; padding: 2px 5px; border-radius: 5px; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
</head>
<body>

<div id="content">
<h2>Công Tơ Điện Thông Minh</h2>
<li> Công tơ điện thông minh là hệ thống thiết bị đo công suất tiêu thụ điện của gia đình bạn và công suất của biến tần hòa lưới trực tiếp (Micro Inverter) hoặc biến tần nội địa Nhật, nhằm tính toàn công suất dư thừa và triệt tiêu chúng nếu có. Để đảm bảo không có lượng điện dư nào bị đẩy ngược ra công tơ của EVN.</li>
<li> Bạn có thể dùng điện thoại để theo dõi các chỉ số từ xa thông qua dịch vụ miễn phí của google.</li>
<li> Giải pháp này giúp mọi người tiếp cận với năng lượng mặt trời theo hướng rẻ và hiệu quả nhất.</li>
<li> Dự án này là miễn phí.</li>
<li> Cần tư vấn vui lòng nhắn tin Zalo 0971.282.336 (Không gọi)</li>
<li> Giao diện theo dõi hoàn toàn mới.</li>
<img width="60%" src="GiaoDien.JPG"></img><br>
<li>Các bạn truy cập kênh youtube của mình để xem nhiều video hơn nhé: <a href="https://youtube.com/@nwhp234">https://youtube.com/@nwhp234</a></li>
Video chạy thực tế khả năng đốt công suất dư thừa (Giao diện cũ).<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VKCawNA2NZY?si=axPUMWMRyM7WWv89" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<br><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/KkQbDSH1ntg?si=CntZ5Dzf_TdB0u3e" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<h3>Dự Án Này Đã Dừng Phát Triển</h3>
<li>Giá bán của các biến tần hòa lưới bám tải chính hãng đã giảm nhiều trong thời gian qua.</li>
<li>Sản phẩm do người Việt Nam làm chủ đã có mặt trên thị trường.</li>
<li>Biến tần hòa lưới bám tải Mạnh Quân, chỉ hơn 3 triệu công suất 2kW: <a href="https://s.shopee.vn/1LWlmbVsPA">https://s.shopee.vn/1LWlmbVsPA</a></li>
<li>Biến tần hòa lưới bám tải Gia Bảo, chỉ hơn 2 triệu công suất 1.9kW:  <a href="https://www.facebook.com/giabao.ngo.94009">https://www.facebook.com/giabao.ngo.94009</a></li>
<li>Kinh tế, hiệu quả, dễ lắp đặt, dễ tiếp cận hơn rất nhiều so với việc sử dụng Micro Inverter + mạch bám tải rời, nên mình quyết định dừng phát triển dự án và ngừng cung cấp phần mềm cho người dùng 👇 </li>

<h3>Chuẩn Bị Phần Cứng</h3> 
<li> Link mua mạch điều khiển (mua 1 mạch): <a href="https://s.shopee.vn/40N5xgqQgG">https://shopee.vn/MạchĐiềuKhiển</a></li>
<li> Link mua Pzem 004T v3.0 (mua 2 mạch): <a href="https://s.shopee.vn/1BARWOxVTO">https://shopee.vn/Pzem004tV3.0</a></li>
<li> Link mua mạch đốt công suất dư thừa: <a href="https://s.shopee.vn/LUs6tmqxz">https://shopee.vn/MạchĐốtCôngSuấtDưthừa</a> hoặc <a href="https://s.shopee.vn/2AvCkbvwS9">Shop này</a><br></li>
<li> Link mua Micro Inver (600w hoặc 1200w).<a href="https://s.shopee.vn/60D0BLBK6l">https://shopee.vn/MicroInverter</a></li>
<li> Nếu bạn đang dùng Micro Inverter có công suất > 250w, hãy mua thêm 1 con Triac BTA41-600 để thay cho triac BT138 có sẵn ở mạch đốt 👆</li>
<li> Mỏ hàn thiếc hoặc ra quán điện thoại nhờ hàn hộ mạch esp8266<--->pzem004<--->mạchđốt theo sơ đồ dưới:</li>
<li> Bạn có thể nối dài các dây tín hiệu D1, D2, D5, D6, D7, 5v, 3v3, pwm, GND, <span style=color:red>nhưng không được nối dài dây của 2 cục CT </span>.</li>
<li> Dây 5v (+) và dây GND (-) nối chung với nhau.</li>
<img width="50%" src="Tong.jpg"></img><br><br>
<h3>Nạp Phần Mềm Cho Thiết Bị</h3>
<li>Đây là cách nạp phần mềm cho mạch wifi (esp8266).</li>
<li> Driver cho máy tính, tải về <a href="https://github.com/npbk21/congtodien/raw/main/CH34x_Install_Windows_v3_4.EXE">tại đây.</a></li>
<li> ESP8266Flasher cho Windows x86 (32 bit), tải về: <a href="https://github.com/nodemcu/nodemcu-flasher/raw/master/Win32/Release/ESP8266Flasher.exe">tại đây.</a></li>
<li> ESP8266Flasher cho Windows x64 (64 bit), tải về: <a href="https://github.com/nodemcu/nodemcu-flasher/raw/master/Win64/Release/ESP8266Flasher.exe">tại đây.</a></li>
<li> Phần mềm nạp cho mạch ESP8266, tải về: <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/Firmware.bin"></a></li>
<li>Cài Driver sau đó mở chương trình ESP8266Flasher.exe</li>
<li>Kết nối thiết bị với máy tình bằng dây cáp USB</li><br>
<img width="50%" src="flash1.jpg"></img><br><br>
<li>Chọn vào "Config" - sau đó bấm vào bánh răng giống như hình dưới. Tìm tới vị trí lưu file Firmware.bin bạn vừa tải về.</li><br>
<img width="50%" src="flash2.jpg"></img><br><br>
<li>Chọn vào "Operation" - sau đó bấm vào COM port, chọn COM của bạn.</li><br>
<li>Bấm vào FLASH giống như hình dưới</li><br>
<img width="50%" src="flash3.jpg"></img><br><br>
<li>Chờ chương trình nạp xong và hiển thị dấu tích màu xanh giống như hình dưới là xong.</li><br>
<img width="50%" src="flash4.jpg"></img><br><br>
<li>Sau khi nạp xong phần mềm, bạn cấp nguồn cho thiết bị, và truy cập vào wifi <span style=color:red>0971282336</span> do thiết bị phát ra.</li><br><br>
<img width="50%" src="KetNoi.PNG"></img><br><br>
<li>Rồi mở trình duyệt web truy cập <span style=color:red>192.168.4.1</span><br><br>
<img width="50%" src="ChonWifi.jpg"></img><br>
<li>Vậy là đã kết nối thiết bị với wifi nhà bạn thành công</li>
<h1>Hướng Dẫn Nhập Lệnh Điều Khiển</h1>
Bạn kết nối với wifi <span style=color:blue>0971282336</span> do thiết bị phát ra. <br>
Dùng trình duyệt web truy cập <span style=color:blue>192.168.4.1</span><br>
Để thiết bị hoạt động đúng theo mong muốn của bạn, vui lòng nhập các lệnh dưới.<br>
<li>Lệnh chạy lần đầu</li>
- Nhập <span style=color:blue>chaylandau</span> rồi bấm gửi để thiết bị tự cấu hình các thông số mặc định.<br>
- Cần chờ thiết bị khởi động lại.<br>
<li>Lệnh ngày chốt số</li>
- Nhập <span style=color:blue>ngaychotso</span><span style=color:red>XX</span> (xx là ngày mà EVN ghi chỉ số điện hàng tháng, ví dụ ngaychotso25).
<li>Lệnh công suất mạch đốt</li>
- Nhập <span style=color:blue>congsuatmachdot</span><span style=color:red>600</span> (nếu bạn muốn đốt công suất dư thừa max là 600, hoặc bao nhiêu tuỳ ý)<br>
- Lưu ý lắp số lượng bóng đèn sợi đốt có công suất tương ứng với công suất đã nhập lệnh.<br>
- Nếu đốt với công suất lớn hơn 600w, vui lòng thay triac theo hướng dẫn trong hình.
<li>Lệnh công suất đốt</li>
Lệnh này dùng để kiểm tra mạch đốt có đốt đúng với công suất mong muốn hay không.<br>
Bạn sẽ cần lắp đồng hồ 6 thông số để đo, và cần lắp đủ số lượng bóng đèn theo thiết lập congsuatmachdot ở trên.<br>
- Nhập lệnh <span style=color:blue>congsuatdot</span><span style=color:red>200</span> mạch sẽ điều khiển đốt với công suất 200w, hoặc bao nhiêu tuỳ ý, và hãy kiểm tra đồng hồ đo xem giá trị có sai số hay không.
<li>Lệnh công suất hoà lưới</li>
Lệnh này dùng để giả lập công suất hoà lưới, nhằm test thử xem hệ thống đã hoạt động hay chưa.<br>
Thay vì phải đợi trời có nắng to để công suất hoà lưới dư thừa, thì bạn có thể test ngay trong đêm.<br>
- Nhập <span style=color:blue>congsuathoaluoi</span><span style=color:red>300</span> (lúc này thiết bị sẽ mặc định có 300w từ hoà lưới, hoặc bao nhiêu tuỳ ý).<br>
- Muốn tắt giả lập hoà lưới nhập <span style=color:blue>khoidonglai</span>
<li> Nhập lệnh để cấu hình theo dõi qua Firebase</li>
Khi đã tạo Project Firebase thành công, sẽ nhập các giá trị như sau.<br>
- Nhập lệnh <span style=color:blue>key</span><span style=color:red>AIzaSyXXX-XXXXXX</span> (chính là giá trị của apiKey: "AIzaSyXXX-XXXXXX")<br>
- Nhập lệnh <span style=color:blue>data</span><span style=color:red>https://your-project-id-default-rtdb.firebaseio.com</span> (chính là giá trị của databaseURL: "https://your-project-id-default-rtdb.firebaseio.com")
<h1>Hướng Dẫn Tạo Project Firebase Và Lấy Thông Tin Cần Thiết</h1>
<li>Video hướng dẫn chỉ 5 phút.</li>
<iframe width="560" height="315" src="https://www.youtube.com/embed/O0YqwYbSqSY?si=4LLBY2wE4Hb3ROx6" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p>Bạn lấy các thông dưới và gửi qua zalo cho mình<p>
<pre>
const firebaseConfig = {
    apiKey: "AIzaSyXXX-XXXXXX",
    authDomain: "your-project-id.firebaseapp.com",
    databaseURL: "https://your-project-id-default-rtdb.firebaseio.com",
    projectId: "your-project-id",
    storageBucket: "your-project-id.appspot.com",
    messagingSenderId: "123456789012",
    appId: "1:123456789012:web:abcdef123456"
};
</pre>
<li>Sau đó bạn thực hiện các bước dưới để nâng thời gian sử dụng Firebase (Testmode) từ 30 ngày lên bao nhiều năm tùy ý:</li>
<pre>
- Truy cập <a href="https://console.firebase.google.com">https://console.firebase.google.com</a>
- Chọn project (dự án bạn vừa tạo).
- Ở thanh menu bên trái, chọn "Firestore Database"
- Chọn "Rules"
- Ở dòng có nội dung: <span id="today-rule"></span>
- Bản sửa thành: <span id="future-rule"></span>
- Nhấn "Publish" để lưu thay đổi.
- Vậy là chúng ta có thể sử dụng thêm 15 năm nữa.

</pre>

<script>
  const today = new Date();

  const formatDate = (date) => {
    const year = date.getFullYear();
    const month = date.getMonth() + 1; // tháng bắt đầu từ 0
    const day = date.getDate();
    return `allow read, write: if request.time < timestamp.date(${year}, ${month}, ${day});`;
  };

  const future = new Date(today);
  future.setFullYear(future.getFullYear() + 15);

  document.getElementById("today-rule").textContent = formatDate(today);
  document.getElementById("future-rule").textContent = formatDate(future);
</script>


</div>
</body></html>