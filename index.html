<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zalo: 0971.282.336</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; padding: 20px; }
        h1, h2, h3 { color: #333; }
        code { background: #f4f4f4; padding: 2px 5px; border-radius: 5px; }
        pre { background: #f4f4f4; padding: 10px; border-radius: 5px; overflow-x: auto; }
    </style>
</head>
<body>

<div id="content">
<h1>Công Tơ Điện Thông Minh - Zalo 0971282336</h1>
<p>- Công tơ điện thông minh là hệ thống thiết bị đo công suất tiêu thụ điện của gia đình bạn và công suất của biến tần hòa lưới trực tiếp (Micro Inverter) hoặc biến tần nội địa Nhật, nhằm tính toàn công suất dư thừa và triệt tiêu chúng nếu có. Để đảm bảo không có lượng điện dư nào bị đẩy ngược ra công tơ của EVN.<br>
- Bạn có thể dùng điện thoại để theo dõi các chỉ số từ xa thông qua dịch vụ miễn phí của google sheet.<br>
- Giải pháp này giúp mọi người tiếp cận với năng lượng mặt trời theo hướng rẻ và hiệu quả nhất.<br>
- Hướng dẫn này là miễn phí.<br>
<br>Các bạn truy cập kênh youtube của mình để xem nhiều video hơn nhé: <a href="https://youtube.com/@vuongnguyenhp234">https://youtube.com/@vuongnguyenhp234</a>
<br><br>Video chạy thực tế khả năng đốt công suất dư thừa.<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VKCawNA2NZY?si=axPUMWMRyM7WWv89" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<br><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/KkQbDSH1ntg?si=CntZ5Dzf_TdB0u3e" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<h3>Chuẩn Bị Phần Cứng</h3> 
- Link mua mạch điều khiển (mua 1 mạch): <a href="https://s.shopee.vn/40N5xgqQgG">https://shopee.vn/MạchĐiềuKhiển</a><br><br>
- Link mua Pzem 004T (mua 2 mạch): <a href="https://s.shopee.vn/3q3flWwQyF">https://shopee.vn/Pzem004tV3.0</a><br><br>
- Link mua mạch đốt công suất dư thừa: <a href="https://s.shopee.vn/LUs6tmqxz">https://shopee.vn/MạchĐốtCôngSuấtDưthừa</a> hoặc <a href="https://s.shopee.vn/2AvCkbvwS9">Shop này</a><br><br>
- Link mua Micro Inver (600w hoặc 1200w).<a href="https://s.shopee.vn/60D0BLBK6l">https://shopee.vn/MicroInverter</a><br><br>
- Nếu bạn đang dùng Micro Inverter có công suất > 250w, hãy mua thêm 1 con Triac BTA41-600 để thay cho triac BT138 có sẵn ở mạch đốt 👆<br>
- Mỏ hàn thiếc hoặc ra quán điện thoại nhờ hàn hộ mạch esp8266<--->pzem004<--->mạchđốt theo sơ đồ dưới:<br><br>
<li>Sơ đồ đấu nối.</li>
- Bạn có thể nối dài các dây tín hiệu D1, D2, D5, D6, D7, 5v, 3v3, pwm, GND, <span style=color:red>nhưng không được nối dài dây của 2 cục CT </span>.<br>
- Dây 5v (+) và dây GND (-) nối chung với nhau.
<img width="90%" src="Tong.jpg"></img><br><br><br>
<h3>Nạp Phần Mềm Cho Thiết Bị</h3>
<li>Đây là cách nạp phần mềm cho mạch wifi (esp8266).</li>
<p> - Driver cho máy tính, tải về <a href="https://github.com/npbk21/congtodien/raw/main/CH34x_Install_Windows_v3_4.EXE">tại đây.</a></p>
<p> - ESP8266Flasher cho Windows x86 (32 bit), tải về <a href="https://github.com/nodemcu/nodemcu-flasher/raw/master/Win32/Release/ESP8266Flasher.exe">tại đây.</a></p>
<p> - ESP8266Flasher cho Windows x64 (64 bit), tải về <a href="https://github.com/nodemcu/nodemcu-flasher/raw/master/Win64/Release/ESP8266Flasher.exe">tại đây.</a></p>
<p> - Phần mềm cho mạch Wifi (lựa chọn công suất đốt >= công suất của Micro Inverter), tải về: <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/200w.bin">200w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/400w.bin">400w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/600w.bin">600w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/800w.bin">800w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/1000w.bin">1000w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/1200w.bin">1200w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/1800w.bin">1800w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/2000w.bin">2000w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/2400w.bin">2400w</a>, <a href="https://github.com/npbk21/congtodien/raw/refs/heads/main/3000w.bin">3000w.</a></p>
<p> - Ví dụ bạn dùng phần mềm 1200w, bạn sẽ phải dùng 6 bóng đèn sợi đốt loại 200w để có công suất tương đương.</p>
<li>Cài Driver sau đó mở chương trình ESP8266Flasher.exe</li>
<li>Kết nối thiết bị với máy tình bằng dây cáp USB</li><br>
<img width="40%" src="flash1.jpg"></img><br><br>
<li>Chọn vào "Config" - sau đó bấm vào bánh răng giống như hình dưới. Tìm tới vị trí lưu file .bin bạn vừa tải về.</li><br>
<img width="40%" src="flash2.jpg"></img><br><br>
<li>Chọn vào "Operation" - sau đó bấm vào COM port, chọn COM của bạn.</li><br>
<li>Bấm vào FLASH giống như hình dưới</li><br>
<img width="40%" src="flash3.jpg"></img><br><br>
<li>Chờ chương trình nạp xong và hiển thị dấu tích màu xanh giống như hình dưới là xong.</li><br>
<img width="40%" src="flash4.jpg"></img><br><br><br>
<li>Sau khi nạp xong phần mềm, bạn cấp nguồn cho thiết bị, và truy cập vào wifi <span style=color:red>0971282336</span> do thiết bị phát ra.</li><br><br>
<img width="40%" src="KetNoi.PNG"></img><br><br><br>
<li>Rồi mở trình duyệt web truy cập <span style=color:red>1.2.3.4</span><br><br>
<img width="40%" src="ChonWifi.jpg"></img><br><br>
<li>Bạn ghi nhớ địa chỉ MAC được hiển thị trên màn hình, sau đó chọn mạng wifi nhà bạn, nhập chính xác mật khẩu và bấm "Kết Nối" để thiết bị kết nối với wifi nhà bạn.</li><br>
<li>Dùng điện thoại android vào CHplay cài ứng dụng Network Analyzer để xem địa chỉ IP nội bộ của công tơ điện.</li><br>
<img width="40%" src="ipnoibo.jpg"></img><br><br><br>
<li>Sau khi đã biết được IP nội bộ của công tơ điện, ví dụ là <span style=color:red>192.168.1.11</span> như hình trên, bạn vào trình duyệt web nhập địa chỉ IP nội bộ để tiến hành cài đặt lệnh cho lần đầu sử dụng đầu tiêntrên.</li><br>
- Bạn nhập lệnh: <span style=color:red>chaylandau</span><br>
- Lúc này mặc định thiết bị sẽ theo dõi qua giao diện web.<br>
<h3>Hướng dẫn xem dữ liệu trên giao diện Web</h3>

    <h1>Hướng Dẫn Tạo Project Firebase Và Lấy Thông Tin Kết Nối</h1>
    
    <h2>1. Tạo Project Trên Firebase</h2>
    <h3>Bước 1: Đăng nhập Firebase</h3>
    <p>Truy cập vào <a href="https://console.firebase.google.com/" target="_blank">Firebase Console</a> và đăng nhập bằng tài khoản Google của bạn.</p>

    <h3>Bước 2: Tạo Project Mới</h3>
    <ul>
        <li>Nhấn <strong>"Thêm dự án"</strong> (<em>Add project</em>)</li>
        <li>Nhập tên dự án (ví dụ: <code>ESP8266-Firebase</code>)</li>
        <li>Nhấn <strong>"Tiếp tục"</strong> (<em>Continue</em>)</li>
        <li>Tắt <strong>Google Analytics</strong> nếu không cần dùng, sau đó nhấn <strong>"Tạo dự án"</strong> (<em>Create project</em>)</li>
        <li>Chờ Firebase khởi tạo và nhấn <strong>"Tiếp tục"</strong> (<em>Continue</em>) khi hoàn tất</li>
    </ul>

    <h2>2. Lấy Thông Tin Firebase</h2>
    <h3>2.1. Lấy <code>FIREBASE_HOST</code> (databaseURL)</h3>
    <ul>
        <li>Trong Firebase Console, chọn <strong>"Build" → "Realtime Database"</strong></li>
        <li>Nhấn <strong>"Tạo cơ sở dữ liệu"</strong> (<em>Create Database</em>)</li>
        <li>Chọn khu vực gần bạn nhất và nhấn <strong>"Tiếp theo"</strong> (<em>Next</em>)</li>
        <li>Chọn <strong>"Chế độ thử nghiệm"</strong> (<em>Test mode</em>), sau đó nhấn <strong>"Bật"</strong> (<em>Enable</em>)</li>
        <li>Bạn sẽ thấy đường dẫn dạng:</li>
    </ul>
    <pre>https://your-project-id-default-rtdb.firebaseio.com/</pre>
    <p>Đây chính là <code>FIREBASE_HOST</code> gửi qua zalo cho mình</p>

    <h3>2.2. Lấy <code>FIREBASE_AUTH</code> (API Key)</h3>
    <ul>
        <li>Vào <strong>"Cài đặt dự án"</strong> (biểu tượng bánh răng) → <strong>"Chung"</strong></li>
        <li>Kéo xuống mục <strong>SDK cài đặt Firebase cho ứng dụng web</strong></li>
        <li>Tìm giá trị <code>apiKey</code>, đây chính là <code>FIREBASE_AUTH</code>  gửi qua zalo cho mình</li>
    </ul>

    <h2>3. Lấy Cấu Hình Firebase Cho Ứng Dụng Web</h2>
    <ul>
        <li>Trong Firebase Console, chọn <strong>"Cài đặt dự án"</strong> → <strong>"Chung"</strong></li>
        <li>Kéo xuống phần <strong>SDK cài đặt Firebase cho ứng dụng web</strong></li>
        <li>Bạn sẽ thấy đoạn mã JSON chứa các thông tin sau:</li>
    </ul>
    <pre>
const firebaseConfig = {
    apiKey: "AIzaSyXXX-XXXXXX",
    authDomain: "your-project-id.firebaseapp.com",
    databaseURL: "https://your-project-id-default-rtdb.firebaseio.com",
    projectId: "your-project-id",
    storageBucket: "your-project-id.appspot.com",
    messagingSenderId: "123456789012",
    appId: "1:123456789012:web:abcdef123456"
};
    </pre>
    <p>Bạn lấy các thông tin sau và gửi qua zalo cho mình<p>
    <ul>
        <li><code>apiKey</code></li>
        <li><code>authDomain</code></li>
        <li><code>databaseURL</code></li>
        <li><code>projectId</code></li>
        <li><code>storageBucket</code></li>
        <li><code>messagingSenderId</code></li>
        <li><code>appId</code></li>
    </ul>

<h3>Hướng dẫn đồng bộ dữ liệu lên Google Sheet</h3>
- <span style=color:red>Khuyến khích mọi người dùng giao diện web Firebase ở trên.</span><br><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/RUMqmZPsydE?si=P6AqRm4qeOFfV1ab" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<br><br><br>
- Dù bảng tính có cập nhật dữ liệu hay không, thì mạch vẫn hoạt động loại bỏ công suất dư thừa bình thường.</br>
- Mỗi một bảng tính google sheet sẽ có một ID riêng biệt.<br>
- Link tạo ID bảng tính của google Sheet <a href="https://docs.google.com/spreadsheets/create">https://docs.google.com/spreadsheets/create</a><br>
- Link quản lý các bảng tính Google Sheet đã tạo <a href="https://docs.google.com/spreadsheets/u/0/">https://docs.google.com/spreadsheets/u/0/</a><br>
- Copy toàn bộ nội dung trong file ==> <a href="https://github.com/npbk21/congtodien/raw/main/App%20Script.txt">App Script.txt</a> và <a href="https://github.com/npbk21/congtodien/raw/main/LinkCheck.txt">LinkCheck.txt</a><br>
Ví dụ chuỗi mới là <span style=color:blue>AKfycbxiL7rmnBRa0txRGtxwQeX2b12nb6g0hM9u</span><br>
Thì bạn nhập lệnh: <span style=color:red>idmoi</span><span style=color:blue>AKfycbxiL7rmnBRa0txRGtxwQeX2b12nb6g0hM9u</span><br>
<br><br><br><br></div>
</body></html>